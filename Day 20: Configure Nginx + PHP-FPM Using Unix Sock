banner@stapp03
sudo su -

sudo yum install -y nginx
sudo systemctl enable --now nginx


sudo vi /etc/nginx/conf.d/app.conf

          server {
              listen 8092;
              server_name stapp03;
          
              root /var/www/html;
              index index.php index.html;
          
              location / {
                  try_files $uri $uri/ =404;
              }
          
              location ~ \.php$ {
                  include fastcgi_params;
                  fastcgi_pass unix:/var/run/php-fpm/default.sock;
                  fastcgi_index index.php;
                  fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
              }
          }
          
sudo nginx -t
sudo systemctl restart nginx

sudo yum install -y https://rpms.remirepo.net/enterprise/remi-release-9.rpm
sudo yum module reset php -y
sudo yum module enable php:remi-8.2 -y
sudo yum install -y php php-fpm php-cli php-mysqlnd php-zip php-gd php-mbstring php-curl php-xml php-bcmath

sudo vi /etc/php-fpm.d/www.conf

          listen = /run/php-fpm/www.sock
          Change to:
          listen = /var/run/php-fpm/default.sock
          Also set permissions so Nginx can use the socket:
          listen.owner = nginxlisten.group = nginxlisten.mode = 0660
          Create parent directory if missing:
          sudo mkdir -p /var/run/php-fpm

sudo systemctl enable --now php-fpm
sudo systemctl restart php-fpm
sudo systemctl restart nginx


# From jump host:
curl http://stapp03:8092/index.php
curl http://stapp03:8092/info.php

